<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Welcome</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #f5f5f5;
            text-align: center;
            margin-top: 80px;
        }

        h1 {
            color: #333;
        }

        p {
            color: #666;
        }

        button {
            margin: 10px;
            padding: 8px 14px;
            border: none;
            border-radius: 5px;
            background-color: #333;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background-color: #555;
        }
    </style>

    <script defer>
        // üîπ V√©rifier que l'utilisateur est bien connect√©
        if (!sessionStorage.getItem("username")) {
            window.location.href = "index.html";
        }

        // üîπ R√©cup√©ration du nom d'utilisateur depuis sessionStorage
        const username = sessionStorage.getItem("username");

        // üîπ R√©cup√©ration de la date du cookie
        const cookies = document.cookie.split("; ");
        const dateCookie = cookies.find(c => c.startsWith("dateCreation="));
        const dateCreation = dateCookie
            ? new Date(dateCookie.split("=")[1]).toLocaleString("fr-FR", {
                dateStyle: "full",
                timeStyle: "short"
            })
            : "inconnue";

        // üîπ Quand la page est charg√©e
        window.addEventListener("DOMContentLoaded", () => {
            document.getElementById("username").textContent = username || "inconnu";
            document.getElementById("date").textContent = dateCreation;
        });

        // === üî∏ Bouton Se d√©connecter ===
        function logout() {
            sessionStorage.clear();
            document.cookie = "dateCreation=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            window.location.href = "index.html";
        }

        // === üî∏ Bouton Clean Cookie ===
        function cleanCookie() {
            document.cookie = "dateCreation=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            alert("üç™ Cookie supprim√© !");
            location.reload(); // recharge la page pour mettre √† jour l'affichage
        }

        // === üî∏ Bouton Clean Session ===
        function cleanSession() {
            sessionStorage.clear();
            alert("üßπ SessionStorage vid√© !");
            location.reload();
        }
    </script>
</head>

<body>
    <h1>Bienvenue <span id="username"></span></h1>
    <p>Ton cookie a √©t√© cr√©√© le : <span id="date"></span></p>

    <button onclick="logout()">Se d√©connecter</button>
    <button onclick="cleanCookie()">Supprime le coockie</button>
    <button onclick="cleanSession()">Supprime la session</button>
</body>

</html>